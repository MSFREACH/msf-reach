<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Events &middot; MSF REACH</title>

  <!-- favicons -->
  <link rel="icon" type="image/png" href="/resources/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/resources/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/resources/images/favicons/favicon-96x96.png" sizes="96x96">

  <!-- Bootstrap -->
  <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/lib/bootstrap/plugins/datetimepicker/bootstrap-datetimepicker.min.css">
  <link href="/resources/css/flexText.css" rel="stylesheet">

  <!-- fontello -->
  <link rel="stylesheet" href="/resources/fonts/fontello/css/fontello.css">
  <link rel="stylesheet" href="/resources/fonts/fontello/css/animation.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
<!-- markdown -->
<script src="https://js.msf-reach.org/marked.min.js" integrity="sha384-I2nqUi8qf3ekoF24PvLsQdMXV0PATvtN8jkyiXNMTvUbnxbX715AZN241NnitpIi" crossorigin="anonymous"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="/lib/leaflet/leaflet.css"/>

  <!-- Leaflet groups -->
  <link rel="stylesheet" href="/lib/leaflet/leaflet.groupedlayercontrol.min.css"/>


  <!-- Leaflet -->
  <link rel="stylesheet" href="/lib/leaflet/MarkerCluster.css"/>

  <!-- Leaflet -->
  <link rel="stylesheet" href="/lib/leaflet/MarkerCluster.Default.css"/>

  <!-- Leaflet rrose popup fix -->
  <link rel="stylesheet" href="/lib/leaflet/leaflet.rrose.css"/>


  <!-- Events -->
  <link rel="stylesheet" href="/resources/css/events.css"/>
  <link rel="stylesheet" href="/resources/css/edit-event.css"/>
  <!-- Nav -->
  <link rel="stylesheet" href="/resources/css/nav.css"/>

  <!-- country selector -->
  <link rel="stylesheet" href="/resources/css/countrySelect.min.css">

  <!-- jqueryui css -->
  <link rel="stylesheet" href="/resources/css/jquery-ui-1.12.1.min.css">

  <script src="https://js.msf-reach.org/vue-multiselect.min.js" integrity="sha384-Ok8d4GcfPFibCm7JQtK3ojcp7M/4l1yOnEsHFkT4YgAVtwQ3Ht6GSUm8RRDHgMqJ" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://js.msf-reach.org/vue-multiselect.min.css">


  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">


  <style type="text/css">
  .page-header {
    margin-top: 20px;
  }
  .form-group {
    margin-bottom: 0;
  }
  dl {
    margin-bottom: 10px;
  }

  dl dt, .form-group label {
    text-transform: uppercase;
    font-size: 13px;
  }

  .bg-success {
    padding: 5px;
  }

  .ui-autocomplete {
    position:absolute;
    cursor:default;
    z-index:2150000000 !important;
  }


  </style>

</head>
<body>

  <!-- Operator access modal -->
  <div class="modal fade" id="operatorAccessModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabelOperator">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabelOperator">Operator access</h4>
        </div>
        <div class="modal-body" id="OperatorModalBody">
          <p>You do not have the permission, please contact <a href="mailto:lucie.gueuning@hongkong.msf.org">us</a> for edit access.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <!-- report creation modal -->
  <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myNewReportModalLabel" id="newReportModal">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myNewReportModalLabel">Create New Report</h4>
        </div>
        <div class="modal-body">
          <div style="">
            <div class="form-section">
              <h4>Hello!</h4>
              <p id="newReportModalEventName"></p>
              <p>We are piloting a new system for sharing information. Please follow the instructions to submit your report.</p>
              <p>THANK YOU for being part of our team! </p>
              <p>Our promise to protect your privacy: Médecins Sans Frontières Hong Kong (MSF) promise not to sell, share or swap your personal information with any other company/ organisation. The information you provide will be treated as strictly confidential and used in accordance to our Privacy Policy, found on <a href="http://msf-seasia.org">our website</a>.</p>
            </div>
            <div class="form-section">
              <h5>1. Please help us best assess the situation by helping us sort your report.</h5>
              <div class="rtype-container">
                <div class="rtype-item" data-msf-value="ACCESS">ACCESS<br><i>Location / Damage</i></div>
                <div class="rtype-item"  data-msf-value="NEEDS">NEEDS<br><i>Population / Medical</i></div>
                <div class="rtype-item"  data-msf-value="CONTACTS">CONTACTS<br><i>Details / Relevance</i></div>
                <div class="rtype-item" data-msf-value="SECURITY">SECURITY<br><i>Incident / Caution</i></div>
              </div>
              <p>Please select one category. There is an opportunity to submit another report card for another category after submission of this one.</p>
            </div>
            <div class="form-section">
              <h5>2. Please select the location of your information on the map:</h5>
              <div class="form-group">
                <input type="text" class="form-control input-sm" placeholder="Search address/location..." id="mapAddress">
              </div>
              <div class="row bottom-margined">
                <div class="col-sm-1">
                  <label for="mapAddressLat">OR:</label>
                </div>
                <div class="col-sm-4">
                  <input type="text" class="form-control input-sm" value="" id="mapAddressLat" placeholder="Latitude">
                </div>
                <div class="col-sm-4">
                  <input type="text" class="form-control input-sm" value="" id="mapAddressLng" placeholder="Longitude">
                </div>
                <div class="col-sm-2">
                  <button type="button" class="btn btn-info btn-sm" id="mapAddressLocate"><span class="glyphicon glyphicon-search"></span></button>
                </div>
              </div>
              <div id="newReportMap"></div>
            </div>
            <div class="form-section">
              <h5>3. Please enter text in the box below to share your information.</h5>
              <textarea rows="12" placeholder="Free text" class ="form-control" id="inputReportText" ></textarea>
              <i> Optional</i>
              <input placeholder="name..." class="form-control" id="inputReportUserName">
            </div>
            <div class="form-section">
              <h5>4. Would you like to upload a file ? </h5><i>(optional)</i>
              <form enctype="multipart/form-data">
                 <input id="inputImageUpload" type="file" accept="image/*,video/*,audio/*" style="display:block;" />
                <div style="margin-top:10px;width:100%;height:55vh;border:1px solid black;">
                  <div id="btnUpTrigger" >
                   <i class="fas fa-camera" style="font-size:108px;cursor:pointer;"></i>
                   <i class="fas fa-video" style="font-size:108px;cursor:pointer;"></i>
                   <i class="fas fa-microphone" style="font-size:108px;cursor:pointer;"></i>
                 </div>
                  <img id="imgPreview" src="" alt="your image" style="width:100%;height:55vh;display:none;"/>
                </div>
              </form>

            </div>
            <div class="form-section">
              <br>
              <div id="divProgress"></div>
              <div id="divSuccess" style="display:none;">
                <h4>Thank you for your report!</h4>
                <br>
                <p>Your information has been successfully sent to MSF-HK. We greatly appreciate your participation and value the information you provided.</p>
                <button onclick="cleanupForNewReport()" class="btn btn-msf">Submit new report</button><br><br>
                <a href="/contact/" target="_blank" class="btn btn-msf">Submit contact details</a>
                <br>
              </div>

            </div>



          </div>

        </div>
        <div class="modal-footer">
          <div class="form-navigation">
            <button type="button" class="previous btn btn-info pull-left">PREVIOUS</button>
            <button type="button" class="next btn btn-danger pull-right">NEXT</button>
            <button type="button" id="createReport" class="btn btn-primary pull-right" style="display: none;">Submit</button>
            <span class="clearfix"></span>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Markdown Explained modal -->
  <div class="modal fade" id="markdownModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
     <!-- content will be loaded from external file -->
  </div>


  <!-- Archive Modal -->
  <div class="modal fade" id="archiveModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content" id="archiveEventModalContent">
        <!-- Warning this will be replace by /public/events/archive.html -->
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Are you sure?</h4>
        </div>
        <div class="modal-body">
          Archived events will no longer be shown on the MSF Reach Landing Page.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button id="btnArchive" type="button" class="btn btn-danger">Close Event</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Edit Modal -->
  <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content" id="eventModalContent">
        <!-- WARNING: Contents on this modal will be replace with public/events/edit.html -->
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Edit Event</h4>
        </div>
        <div class="modal-body">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Name</h3>
            </div>
            <div class="panel-body">
              <input type="text" id="inputName" class="form-control" placeholder="" aria-describedby="basic-addon1">
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Status</h3>
            </div>
            <div class="panel-body">
              <select class="form-control" id="inputStatus">
                <option value="Monitoring" selected>Monitoring</option>
                <option value="Exploration">Exploration</option>
                <option value="Intervention">Intervention</option>
                <option value="Completed Mission">Completed Mission</option>
              </select>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Security Details</h3>
            </div>
            <div class="panel-body">
              <textarea class="form-control" rows="2" id="inputSecurityDetails" placeholder="" required></textarea>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Latest Notification</h3>
            </div>
            <div class="panel-body">
              <textarea class="form-control" rows="2" id="inputNotification" placeholder="" required></textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button id="btnSaveEdits" type="button" class="btn btn-primary">Save Edits</button>
        </div>
      </div>
    </div>
  </div>
  <!-- About modal -->
  <div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="myModalLabelAbout">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabelAbout">About MSF REACH</h4>
        </div>
        <div class="modal-body" id="AboutModalBody">
            <div class="list-group">
                <div class="list-group-item list-group-item-action video-selector" onclick="displayVideo('intro')"><i id="intro_icon">&uarr;</i> First introduction to REACH for MSF Movement</div>
                <div class="list-group-item list-group-item-action" style="display:none;" id="intro_video" >
                  <iframe width="300" height="225" allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/LQRrPJdYOcs?autoplay=0"></iframe>
                </div>
                <div class="list-group-item list-group-item-action video-selector" onclick="displayVideo('tic')"><i id="tic_icon">&uarr;</i> REACH - TIC Incubator Ideas Application</div>
                <div class="list-group-item list-group-item-action" style="display:none;" id="tic_video" >
                  <iframe width="300" height="225" allowfullscreen="allowfullscreen" src="https://www.youtube.com/embed/-Kfodflm3M8?autoplay=0"></iframe>
                </div>
                <a href="/resources/docs/PartnersPrivacyPolicy.pdf" target="_blank" class="list-group-item list-group-item-action"><i>&bull;</i> Partnership and confidentiality</a>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- FAQ modal -->
  <div class="modal fade" id="FAQ" tabindex="-1" role="dialog" aria-labelledby="myModalLabelFAQ">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabelFAQ">Frequently Asked Questions</h4>
        </div>
        <div class="modal-body" id="FAQModalBody">
          <p style="font-weight:bold;">What is REACH?</p>
          <p>
          REACH is a platform designed to combine institutional data with crowd-sourced information (including social media, instant messaging, and relevant RSS feeds) in real-time to monitor and manage emergencies. REACH has two main objectives: (1) helping MSF to streamline our data sharing activities and improve our information management in emergency situation (2) improve the response time by better and faster understanding the evolving situation on the ground (crowdsourcing by report card; screening social media and news feed; AI and ML for better analysis of past responses in the area).
          </p>

          <p><span style="font-weight:bold;">Who is responsible for the platform?</p>
          <p>
          REACH is an initiative of the MSF Hong Kong OSU (Operation Support Unit), in collaboration with the London-based software development cooperative, User Group Inc. LLP and Across the Cloud Pty Ltd. The ERSU (Emergency Response Support Unit) manages the platform and makes it available for operational usage to colleagues throughout the Movement.
          </p>

          <p style="font-weight:bold;">Who pays for REACH?</p>
          <p>
           REACH is currently in its second stage of development, which is funded by a Transformational Investment Capacity Incubator grant. The first phase of development was funded by the ERSU in Hong Kong. The second phase, including the extension would benefit from the TIC grant. Work on governance and structure will be done before moving ahead to the Phase 3 of development.
          </p>

          <p style="font-weight:bold;">Who can access REACH?</p>
          <p>
          In its current phase, REACH can gather, sort, display and management real-time disaster information in Southeast Asia. Members of the movement who want to use the tool to this end (edit permission) should contact Lucie Gueuning with a request for operators access. However, all members of the Movement are now able to login to a view only set of features using their MSF credentials as per Office 365.
          </p>

          <p>Users from MSF external network can send out report cards and contact cards to collect information that is then presented in REACH.</p>

          <p style="font-weight:bold;">Is REACH GDPR compliant?</p>

          <p>Based on advice from a consultant, we have made REACH compliant with the GDPR.</p>

          <p style="font-weight:bold;">Who can enter contact details?</p>

          <p>Either contacts themselves enter their personal contact details thanks to our contact cards, or MSF staff enter, as a private list, their own contact network in order to share their details with specific colleagues within the Movement. All MSF staff acknowledge having received consent from contacts to enter their information into the MSF database.</p>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Contact Page Modal -->
  <div class="modal fade" id="contactDetailsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabelContact">
    <div class="modal-dialog ui-front" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="myModalLabelContact" style="display: inline-block;">Contact Information</h4>
          <i id="contactShare" class="icon-link-ext icon-floating" style="font-size:18px;"></i>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-xs-6">
              <div class="bg-success">Record History</div>
              <div class="form-group">
                <label>Created on:</label>
                <span class="filed"></span>
            </div>
            <div class="form-group">
              <label>Last updated on:</label>
              <span class="updated"></span>
            </div>
            <div class="form-group" id="privateContactDiv">
              <label>Private?</label>
              <span class="private"></span>
            </div>
            <div class="form-group" id="shareWithDiv">
              <label>Share with</label>
              <input type="text" id="sharewith_name" name="sharewith_name" class="form-control" placeholder="Start by typing a name...">
              <button type="button" class="btn btn-success" onclick="shareWithUser()" id="btnShare"><span class="glyphicon glyphicon-share"></span> Share</button>
            </div>
          <div class="form-group">
            <label>Last email sent on:</label>
          </span> <span class="last_email"></span>
        </div>
        <div class="bg-success">Personal Details</div>
        <div class="form-group" style="display:none;">
          <label>Name:</label>
          <span class="title"></span> <span class="name"></span>
        </div>
        <div class="form-group" style="display:none;">
          <label>Alias:</label>
          <span class="otherNames"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Date of birth:</label>
          <span class="dob"></span>
        </div>
        <div class="form-group" style="display:none;">
          <label>Gender:</label>
          <span class="gender"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Contact type:</label>
          <span class="type"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Speciality / profile:</label>
          <span class="speciality"></span>
        </div>
        <div class="bg-success">Contact details</div>
        <div class="form-group"  style="display:none;">
          <label>Mobile phone:</label>
          <span class="cell"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Work phone:</label>
          <span class="work"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Home phone:</label>
          <span class="home"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Email:</label>
          <span class="email"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Other email:</label>
          <span class="email2"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Fax:</label>
          <span class="fax"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Web:</label>
          <span class="web"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Address:</label>
          <span class="address"></span>
        </div>
      </div>
      <div class="col-xs-6">
        <div id="msf_details">
          <div class="bg-success">MSF details</div>
          <div class="form-group" style="display:none;">
            <label>OC:</label>
            <span class="OC"></span>
          </div>
          <div class="form-group" style="display:none;">
            <label>Employment status:</label>
            <span class="msf_employment"></span>
          </div>
          <div class="form-group" style="display:none;">
            <label>Job title:</label>
            <span class="job_title"></span>
          </div>
          <!-- <div class="form-group" style="display:none;">
            <label>Section:</label>
            <span class="msf_section"></span>
          </div>
          <div class="form-group" style="display:none;">
            <label>Branch:</label>
            <span class="msf_branch"></span>
          </div>
          <div class="form-group"  style="display:none;">
            <label>Project:</label>
            <span class="msf_project"></span>
          </div>
          <div class="form-group"  style="display:none;">
            <label>Mission:</label>
            <span class="msf_mission"></span>
          </div> -->
          <div class="form-group" style="display:none;">
            <label>Additional Information:</label>
            <span class="msf_additional"></span>
          </div>
        </div>
        <div id="employment_details">
          <div class="bg-success">Employment details</div>
          <div class="form-group"  style="display:none;">
            <label>Employer / organisation name:</label>
            <span class="employer"></span>
          </div>
          <div class="form-group"  style="display:none;">
            <label>Job title:</label>
            <span class="job_title"></span>
          </div>
          <div class="form-group"  style="display:none;">
            <label>Unit/division:</label>
            <span class="division"></span>
          </div>
          <div class="bg-success">MSF relationship</div>
          <div class="form-group"  style="display:none;">
            <label>Association Member:</label>
            <span class="msf_associate"></span>
          </div>
          <div class="form-group"  style="display:none;">
            <label>Former Staff:</label>
            <span class="msf_peer"></span>
          </div>
        </div>

        <div class="bg-success">Social media</div>
        <div class="form-group"  style="display:none;">
          <label>WhatsApp:</label>
          <span class="WhatsApp"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Twitter:</label>
          <span class="Twitter"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Facebook:</label>
          <span class="Facebook"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Telegram:</label>
          <span class="Telegram"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Skype:</label>
          <span class="Skype"></span>
        </div>
        <div class="form-group"  style="display:none;">
          <label>Instagram:</label>
          <span class="Instagram"></span>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
  </div>
</div>
</div>
</div>
<!-- Mission history modal -->
<div class="modal fade" id="missionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabelMession">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content" id="missionModalBody">
        [modal content here]
    </div>
  </div>
</div>

<!-- Dialog Modal -->
<div class="modal fade" id="dialogModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="dialogModalTitle"></h4>
      </div>
      <div class="modal-body" id="dialogModalBody">
        <div class="msf-loader"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Analytics for status change modal -->
<div class="modal fade" tabindex="-1" role="dialog"  id="analyticsStatusModal">
  <div class="modal-dialog modal-lg ">
    <div id="analysisResultVue" class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myNewAnalyticsModalLabel">Event Analytics</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <div class="row">
            <div  class="col-sm-12 analyticsDiv">
              <div v-if="isAnalyzing">
                <span>Analyzing event ...</span> <div class="msf-loader"></div>
              </div>
              <div v-if="vizalyticsError"> <span  class="glyphicon glyphicon-remove-circle" style="color:red;"></span> Error in analyzing event.</div>

              <div v-if="isAnalyzed">
                <h4>Anlysis result based on past events:</h4>
                <span v-if="response.status.success" > <span class="glyphicon glyphicon-check" style="color:green;"></span> OK </span>
                <span v-else> <span class="glyphicon glyphicon-remove-circle" style="color:red;"></span> Unsuccessful </span>

                <div class="" v-for="res in response.results">
                  <h5> Topic: {{ res.topic }}</h5>
                  <h5> Insights</h5>
                  <ul>
                    <li v-for="ins in res.insights">{{ins}}</li>
                  </ul>
                  <div class="alert alert-success">
                    <strong><i class="glyphicon glyphicon-check"></i></strong> Analysis data is avilable next to relavant fields (in edit mode)
                  </div>

                </div>
              </div>

            </div>
            <!--<div class="col-sm-3">
              <div id="analyticsMap"></div>
            </div>-->
          </div>

        </div>


      </div>
      <div class="modal-footer">
        <button v-if=" !isAnalyzed && !isAnalyzing" v-on:click="resetSubmission()" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button v-if="isAnalyzed" v-on:click="resetSubmission()" type="button" class="btn btn-msf" data-dismiss="modal">Done</button>
      </div>
    </div>
  </div>
</div>


<!-- Page -->
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand"><img src="/resources/images/msf-reach-logo-trans-01.png" style="height:100%;width:auto;" /></a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span id="username"></span> <span class="caret"></span></span></a>
          <ul class="dropdown-menu">
            <li><a href="#about" data-toggle="modal" data-target="#about">About MSF REACH</a></li>
            <li><a href="#FAQ" data-toggle="modal" data-target="#FAQ">FAQ</a></li>
            <li><a href="/lib/pdfjs/web/viewer.html?file=MSF_REACH_User_Manual_2018-12-05.pdf">User Manual</a></li>
            <li><a href="https://www.youtube.com/playlist?list=PLMlyttCV0rQRU8HWkylhmJdLo0WLUwL8Y">Tutorial Videos</a></li>
            <li><a id="logout" href="/logout">Sign out</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container-fluid">
      <div class="row">
        <!-- Side pane -->
        <div id="sidepane" class="col-md-6" style="min-height:90vh;">
          <ul class="nav nav-tabs">
            <li role="presentation" class="active"><a id="eventTab" data-toggle="tab" href="#event">Event</a></li>
            <li role="presentation"><a id="feedTab" data-toggle="tab" href="#tweets">Twitter Feed</a></li>
            <li role="presentation"><a id="sharepointTab" data-toggle="tab" href="#sharepoint">SharePoint Search</a></li>
            <li role="presentation"><a id="contactsTab" data-toggle="tab" href="#contacts" >Contacts</a></li>
            <li role="presentation"><a id="ongoingEventsTab" data-toggle="tab" href="#ongoingEvents">Ongoing MSF Responses</a></li>
            <li role="presentation"><a id="missionsTab" data-toggle="tab" href="#missions">Previous MSF Responses</a></li>
            <li role="presentation"><a id="reportsTab" data-toggle="tab" href="#reports">Reports</a></li>
            <li role="presentation"><a id="countryDetailsCIATab" data-toggle="tab" href="#countryDetailsCIA">CIA World Factbook</a></li>
            <li role="presentation"><a id="countryDetailsLinksTab" data-toggle="tab" href="#countryDetailsLinks">MSF Country Policy Papers</a></li>
          </ul>
          <div class="msf-loader" id="eventMSFLoader"></div>
          <div class="tab-content" id="eventVApp" v-cloak>

            <div id="event" class="tab-pane fade in active">
              <div id="eventEditingOperatorCheck"></div>
              <!-- here be GENERAL INFO  -->
              <div class="panel-group" >
                <div :class="{'panel':true, 'panel-default': (event.metadata.event_status != 'ongoing' || event.metadata.project_code), 'panel-warning': (event.metadata.event_status == 'ongoing' && !event.metadata.project_code)}">
                  <div class="panel-heading" style="cursor:pointer;"  >
                    <a> General details </a>
                    <button v-if="!panelEditing.General" type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('General')">Edit</button>
                    <button type="button" v-show="panelEditing.General" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()">Cancel</button><span class="pull-right">&nbsp;</span>
                    <button type="button" v-show="panelEditing.General" class="btn btn-primary btn-xs pull-right" @click="submitEventMetadata()"> Save </button>
                  </div>
                  <div class="panel-body" >
                <table class="table" v-show="!panelEditing.General" style="table-layout: fixed;">
                  <tr><td>Project code <span class="highlight" v-show="event.metadata.event_status == 'ongoing' && !event.metadata.project_code">* Please review</span></td><td colspan="2">{{ event.metadata.project_code ? event.metadata.project_code : "As there is no MSF activity yet, no project code is allocated to this event. We are still monitoring the disaster."}}</td></tr>
                  <tr><td>Name</td><td  colspan="2"> {{ event.metadata.name }}</td></tr>
                  <tr><td>REACH Operator</td><td>{{ event.metadata.user }}</td></tr>
                  <tr><td>Area(s)</td>

                    <td colspan="2">
                      <div class="chunks" v-for="(area, index) in event.metadata.areas">
                        <span v-if="area.region.length > 0"> {{area.region}} {{area.country_code}}</span>
                        <span v-else>{{area.country}}</span>
                        <span v-if="event.metadata.areas.length > 1 && index < event.metadata.areas.length"> </span>
                        <span class="sub-tag" v-if="event.metadata.severity_measures[index]">
                          <span :style="'color:'+severityColors[event.metadata.severity_measures[index].scale-1]">{{severityLongTexts[event.metadata.severity_measures[index].scale-1]}} severity</span>
                          <span class="notes"><br/> {{ event.metadata.severity_measures[index].description }} </span>
                        </span>
                      </div>
                    </td>
                  </tr>
                  <tr><td>Status</td><td  colspan="1"> {{ event.metadata.event_status || 'monitoring' }} <i class="glyphicon glyphicon-check" style="color:green;" :title="analyzedTimeTxt" v-if="hasBeenAnalyzed"></i></td><td  colspan="1"> <button type="button" @click="analyzeEvent" class="btn btn-warning"><i :class="'glyphicon glyphicon-refresh'+(isAnalyzing ? ' msf-spin': '')"></i> Analyze</button> </td></tr>
                  <tr><td>Type</td><td  colspan="2"> {{ typeStr(event.type,event.metadata.sub_type) }}</td></tr>
                  <tr><td>Event Date and Time</td><td  colspan="2"> {{ (event.metadata.event_datetime || event.created_at) | formatFullDate }}</td></tr>
                  <tr><td>Date and hours (local time) of the disaster</td><td  colspan="2"> {{ event.metadata.event_local_time | formatFullDate  }}</td></tr>



                  <tr><td>Description</td><td  colspan="2"> {{event.metadata.description }}</td></tr>

                  <tr v-if='event.metadata.notification'><td>Latest notification: </td><td  colspan="2" style="word-break: break-word;" v-html="notStr"></td></tr>
                  <tr v-else><td>Latest notification:  </td><td  colspan="2">(none)</td></tr>
                  <tr><td>Follow this event by email:  </td>
                    <td style="word-break:break-all;"> <span v-for="em in event.subscribers" style="display:block;"><span style="white-space:normal; text-transform: capitalize;" class="label label-success" :title="em" >{{em.split('@')[0].split(/[\.\_]/).join(' ')}}</span><span v-if="hasWritePermission" class="label label-danger " style="cursor:pointer;" @click="unSubscribeOthers(em)">X</span></span> </td>
                    <td>
                      <div class="row">
                        <div class="col-sm-12">
                            <button type="button" class="btn btn-info btn-block" @click="subscribe()"><i class="glyphicon glyphicon-envelope"></i> Subscribe yourself</button>
                          </div>
                          <div class="col-sm-12">
                            <button type="button"  class="btn btn-danger btn-block" @click="unsubscribe()"><i class="glyphicon glyphicon-eye-close"></i> Unsubscribe</button>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-12">
                          <a :href="manualEmailHref" class="btn btn-info btn-block" style="margin-top:10px;">Send an update</a>
                        </div>
                        <div class="col-sm-12">

                            <vue-multiselect v-if="hasWritePermission" v-model="selectedInvitees" :options="inviteeOptions" :searchable="true" :close-on-select="false" :show-labels="false" placeholder="Subscribe other contacts..." :multiple="true" label="displayName" track-by="displayName" @search-change="queryContacts" :loading="msLoading"></vue-multiselect>

                              <button v-if="hasWritePermission"  class="btn btn-primary btn-block" type="button" @click="subscribeOthers()" style="margin-left:5px;">Subscribe</button>


                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr><td>Mission contact person </td><td colspan="2"> {{ event.metadata.incharge_name+', '+event.metadata.incharge_position }}</td></tr>
                  <tr><td>Sharepoint Link </td><td  colspan="2"  style="word-break: break-all;"> <a :href='event.metadata.sharepoint_link' target="_blank"> {{ event.metadata.sharepoint_link || '' }}</a> <span class="label label-success" v-if="hasBeenAnalyzed && ((vizalyticsResp.documents && vizalyticsResp.documents.length>0) || (vizalyticsResp.maps && vizalyticsResp.maps.length>0))">(**suggestions available in edit mode)</span> </td></tr>
                  <tr><td>Last updated at</td><td colspan="2"> {{ event.updated_at  | formatFullDate }}</td></tr>
                  <tr>
                    <td> Share Links to </td>
                    <td>Event page: </td> <td> <span class="sharethis-inline-share-buttons" style="display: inline-block" :data-url="window.location" data-title="I am sharing a link to a MSF REACH event:" data-description="Please click subscribe on event page after logging in to subscribe to updates."></span>
                      <span id="eventCopyButton" class="st-animated" style="display: inline-block"></span>
                      </td>
                </tr>
                <tr>
                  <td style="border: none;"></td>
                  <td style="border: none;">External Report Card: </td>
                  <td style="border: none;"><div><span class="sharethis-inline-share-buttons" style="display: inline-block" :data-url="eventReportLink" data-title="Please send a report to MSF REACH with this link:"></span>
                    <span id="reportCopyButton" class="st-animated"></span><a data-toggle="modal" data-target="#newReportModal" style="cursor: pointer"> Open in new tab</a></div></td>
                </tr>

                </table>

                <table class="table" v-show="panelEditing.General" id="fields-General" style="table-layout:fixed;">
                  <!-- here is now all input fields -->
                  <script src="/resources/js/edit-maps.js"></script>
                  <tr>
                    <td>Project code</td>
                    <td> <input id="eventProjectCode" type="text" v-model="event.metadata.project_code" class="form-control" placeholder="Project code" /></td>
                  </tr>
                  <tr>
                    <td>Name</td>
                    <td> <input id="eventName" type="text" v-model="event.metadata.name" class="form-control" placeholder="Event name" /></td>
                  </tr>
                  <tr>
                    <td>REACH Operator</td>
                    <td> <input id="eventOperator" type="text" v-model="event.metadata.user ? event.metadata.user : localStorage.getItem('username')" class="form-control" placeholder="Event operator" /></td>
                  </tr>
                  <tr>
                    <td class="table-container" id="eventAreas">
                      Area(s) <br/>
                    </td>
                    <td>
                      <div v-if="event.metadata.areas" v-for="(area, index) in event.metadata.areas" class="tags" v-model="event.metadata.areas">
                        <span v-if="area.region.length > 0" v-model="area"> {{area.region}}, {{area.country_code}} </span>
                        <span v-else v-model="area"> {{area.country}} </span>
                         <span class="remove" @click="removeArea(area)"> x </span>
                         <div class="severity-wrapper" v-if="event.metadata.severity_measures[index]">
                           <span class="label"> Severity analysis </span>
                           <span class="inputSeveritySlider"></span>
                           <textarea v-model.trim="event.metadata.severity_measures[index].description" placeholder="Severity description" class="form-control"></textarea>
                         </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      Add area for the emergency
                      <input type="text" class="form-control input-sm" placeholder="Search address/location..." id="editEventAddress">
                      <label for="editEventAddressLat">OR</label>
                      <input type="text" class="form-control input-sm" value="" id="editEventAddressLat" placeholder="Latitude">
                      <input type="text" class="form-control input-sm" value="" id="editEventAddressLng" placeholder="Longitude">
                      <button type="button" class="btn btn-info btn-sm" id="editEventAddressLocate"><span class="glyphicon glyphicon-search"></span></button>
                    </td>
                    <td> <div id="eventMap" class="map-container"></div> </td>
                  </tr>


                  <tr>
                    <td>Status</td>
                    <td>
                      <select v-model="event.metadata.event_status" class="form-control">
                        <option disabled value="">Please select one</option>
                        <option v-for="item in statuses" :value="item.value">{{ item.text }}</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>Type</td>
                    <td>
                      <div v-for="(item, index) in eventTypes">
                      <input class ="newEventTypeBox" v-model="checkedTypes" type="checkbox" :index="index" :value="item.value" :id="'ev-type'+index"> <label class="eventBox" :for="'ev-type'+index"> {{item.text}} </label>
                        <div v-if="item.subTypes && checkedTypes.indexOf(item.value) != -1" class="subTypes">
                        <span v-if="item.subTypes" :id="item.value + index" v-for="(sub, index) in item.subTypes">
                            <input class ="newSubEventTypeBox" v-model="checkedSubTypes" type="checkbox" :value="sub.value" :id="'ev-sub-'+(sub.text)+index" /> <label class="eventBox" :for="'ev-sub-'+(sub.text)+index"> {{sub.text}} &nbsp&nbsp </label>
                            <br v-if="index % 4 == 1"/>
                        </span>

                        <span>
                          <input class ="newSubEventTypeBox" v-model="otherFields[item.value].isSelected" type="checkbox" :value="'other_' + item.value" /> <label class="eventBox"> Other {{item.text}} &nbsp&nbsp </label>
                          <input v-if="otherFields[item.value].isSelected" type="text" v-model="otherFields[item.value].description"  class="form-control" placeholder="(Specify)" />
                        </span>
                      </div>
                    </div>
                      <div>
                        <input class ="newEventTypeBox" v-model="otherFields.type.isSelected" type="checkbox" value="other_emergencies"> <label class="eventBox"> Others </label>
                        <input v-if="otherFields.type.isSelected" type="text" class="form-control" v-model="otherFields.type.description" placeholder="(Specify)" />
                      </div>
                  </td>
                  </tr>


                  <tr><td>Event Date and Time</td><td> {{ (event.metadata.event_datetime || event.created_at) | formatFullDate }}</td></tr>

                  <tr>
                    <td>Description</td>
                    <td><textarea id="eventDescription" type="text" v-model="event.metadata.description" class="form-control" placeholder="Event description"> </textarea> </td>
                  </tr>

                  <tr>
                    <td>Date and hours (local time) of the disaster </td>
                    <td class="datepicker-container">
                      <date-picker v-model="event.metadata.event_local_time" :config="dateTimeConfig"></date-picker>
                    </td>
                  </tr>
                  <tr>
                    <td>Mission Contact Person </td>
                  </tr>
                  <tr>
                    <td class="padding-bottom">
                      <input type="text" class="form-control" v-model="event.metadata.incharge_position" placeholder="Position" />
                    </td>
                    <td class="padding-bottom">
                      <input type="text" class="form-control" v-model="event.metadata.incharge_name" placeholder="Name" />
                    </td>
                  </tr>
                  <tr>
                    <td class="datepicker-container">
                      <date-picker v-model="event.metadata.mission_contact_person.arrival_time" placeholder="Arrival time" :config="dateTimeConfig"></date-picker>
                    </td>
                    <td class="datepicker-container">
                      <date-picker v-model="event.metadata.mission_contact_person.departure_time" placeholder="Departure time" :config="dateTimeConfig"></date-picker>
                    </td>
                  </tr>
                  <tr>
                    <td>ID link - SharePoint</td>
                    <td>
                      <input type="text" class="form-control" v-model="event.metadata.sharepoint_link" placeholder="SharePoint Link" />
                    </td>
                  </tr>
                  <tr>
                    <td colspan="2">
                      <div class="panel panel-info" v-if="hasBeenAnalyzed" style="margin-top:5px;">
                        <div class="panel-heading" >
                          <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseSug">
                            <a data-toggle="collapse" data-target="#collapseSug"
                            href="#" class="collapsed in">
                            * Analysis suggestions: maps and documents
                            </a>
                          </div>
                        </div>
                        <div id="collapseSug" class="panel-collapse collapse in">
                          <div class="panel-body" >
                            <h5> Documents: </h5>
                            <ul>
                              <li v-for="d in vizalyticsResp.documents" style="word-break:break-all;">{{d.summary }} <a :href='d.url' target="_blank">{{d.filename}}</a> </li>
                            </ul>
                              <div v-if="!(vizalyticsResp.documents) || vizalyticsResp.documents.length==0">No documents found.</div>
                            <h5> Maps: </h5>
                            <ul>
                              <li v-for="m in vizalyticsResp.maps" style="word-break:break-all;">{{m.details ? m.details + ',' : ''}} <a :href='m.url' target="_blank">{{m.url}}</a> </li>
                            </ul>
                            <div v-if="!(vizalyticsResp.maps) || vizalyticsResp.maps.length==0">No maps found.</div>

                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>



                </table>
              </div>


                </div>
              </div>


              <div class="panel-group" id="accordion">
                <div :class="{'panel':true, 'panel-default': !panelDirty.Notification, 'panel-warning': panelDirty.Notification}">
                  <div class="panel-heading" >
                    <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseNotification">
                      <a data-toggle="collapse" data-target="#collapseNotification"
                      href="#" class="collapsed">
                      <span v-if="!panelEditing.Notification"> Notifications </span>
                      <span v-else> Enter new notification </span>

                      </a>
                    </div>
                      <button v-if="!panelEditing.Notification" type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Notification')">Edit</button>
                      <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Notification">Cancel</button><span class="pull-right">&nbsp;</span>
                      <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Notification')" v-show="panelEditing.Notification">Save</button>
                  </div>
                  <div id="collapseNotification" class="panel-collapse collapse in">
                    <div class="panel-body" >


                            <table v-show="!panelEditing.Notification" v-if="(event.metadata.notification) && (event.metadata.notification.length > 0) " class="table" >
                              <thead><tr><td>Username</td><td>Time</td><td>Notification</td></tr></thead>
                              <tbody>
                                <tr v-for="(elem,index) in reversedNotifications" :style="((index==0) && panelDirty.Notification) ? 'font-weight:bold;' : '' ">
                                  <td v-if="elem.hasOwnProperty('username')">{{elem.username}}</td>
                                  <td v-else>(username not previously recorded)</td>
                                  <td>{{ (elem.notification_time*1000) | formatFullDate }}</td>
                                  <td><span v-html="elem.notification"></span>
                                      <a v-if="elem.notificationFileUrl" :href="elem.notificationFileUrl" target="_blank">(attachment)</a>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                      <div v-show="panelEditing.Notification">
                        <div id="mdExplained" data-toggle="modal" v-on:click="openMarkdownSyntax"> *Text editor adopts <span> Markdown format </span></div>
                        <dd id="notificationEditor">
                          <textarea type="text" v-model="newNotification" @input="updateMarkdown"></textarea>
                          <div id="markdownPreview" v-html="compiledMarkdown"></div>
                        </dd>
                        <dt>Attach a file</dt>
                        <dd>
                          <form enctype="multipart/form-data">
                            <input id="inputNotificationUpload" type="file" accept="*/*" />
                          </form>
                        </dd>
                      </div>
                    </div>
                  </div>
                </div>
                <div :class="{'panel':true, 'panel-default': !panelDirty.Response, 'panel-warning': panelDirty.Response}" >
                  <div class="panel-heading">
                    <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseResponse">
                      <a data-toggle="collapse" data-target="#collapseResponse"
                      href="#" class="collapsed">
                      MSF Response
                    </a> <span class="label label-success" v-if="hasBeenAnalyzed && vizalyticsResp.supplies">(**suggestions available in edit mode)</span>
                  </div>
                    <button v-if="!panelEditing.Response" type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Response')">Edit</button>
                    <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Response">Cancel</button><span class="pull-right">&nbsp;</span>
                    <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Response')" v-show="panelEditing.Response">Save</button>
                  </div>
                  <div id="collapseResponse" class="panel-collapse collapse">
                    <div class="panel-body" >
                              <dt>Type of programmes:</dt>
                              <dd v-if="!panelEditing.Response" v-for="item in event.metadata.msf_response_types_of_programmes" >
                                <span class="label label-primary" >
                                     {{ getTypeOfProgramme(item) }}
                                </span>&nbsp;
                              </dd>
                              <dd v-if="panelEditing.Response">
                                <div v-for="item in msfTypeOfProgrammes" class="type-of-programmes">
                                  <label>
                                    <input type="checkbox" :value="item.value" v-model="event.metadata.msf_response_types_of_programmes" /> {{ item.text }}
                                  </label>
                                </div>
                              </dd>
                              <dt>MSF Response:</dt>
                              <dd v-if="!panelEditing.Response">
                                {{event.metadata.msf_response}}
                              </dd>
                              <dd  v-if="panelEditing.Response">
                                <textarea v-model="event.metadata.msf_response" placeholder="MSF response" class="form-control"></textarea>
                              </dd>
                              <dt>Start Date:</dt>
                              <dd v-if="!panelEditing.Response">
                                {{formatDateOnly(event.metadata.start_date_msf_response)}}
                              </dd>
                              <dd v-if="panelEditing.Response">
                                <date-picker v-model="event.metadata.start_date_msf_response" :config="{format: 'YYYY-MM-DD'}" placeholder="Start date"></date-picker>
                              </dd>
                              <dt>End Date:</dt>
                              <dd v-if="!panelEditing.Response">
                                {{formatDateOnly(event.metadata.end_date_msf_response)}}
                              </dd>
                              <dd v-if="panelEditing.Response">
                                <date-picker v-model="event.metadata.end_date_msf_response" :config="{format: 'YYYY-MM-DD'}" placeholder="End date"></date-picker>
                              </dd>
                             <dl>
                              <dt>
                                Location of MSF Response:
                              </dt>
                              <dd v-if="!panelEditing.Response">
                                  <span v-if="typeof(event.metadata.msf_response_location.coordinates) !== 'undefined'">
                                    {{event.metadata.msf_response_location.coordinates.lat}}, {{event.metadata.msf_response_location.coordinates.lng}}
                                  </span>
                                  <span v-if="typeof(event.metadata.msf_response_location.area) !== 'undefined'">
                                    {{event.metadata.msf_response_location.area.region}}, {{event.metadata.msf_response_location.area.country}}
                                  </span>
                                </dd>
                              <dd v-else>
                                <input type="text" class="form-control input-sm" placeholder="Search address/location..." id="editEventRespAddress">

                                <label for="editEventRespAddressLat">OR</label>

                                <input type="text" class="form-control input-sm" value="" id="editEventRespAddressLat" placeholder="Latitude">

                                <input type="text" class="form-control input-sm" value="" id="editEventRespAddressLng" placeholder="Longitude">
                                <button type="button" class="btn btn-info btn-sm" id="editEventRespAddressLocate"><span class="glyphicon glyphicon-search"></span></button>
                            </dd>
                                <div id="msfResponseMap"></div>
                            </dl>

                              <dt>Operational Centre:</dt>
                              <dd v-if="!panelEditing.Response">
                                {{_.compact(event.metadata.msf_response_operational_centers).join(',')}}
                              </dd>
                              <dd v-else>
                                <div v-for="item in msfOperationalCenters" class="operational-centers">
                                  <label>
                                    <input type="checkbox" :value="item" v-model="event.metadata.msf_response_operational_centers" /> {{ item }}
                                  </label>
                                </div>
                              </dd>
                              <dt>
                                Medical Material:
                              </dt>
                                  <div v-if="!panelEditing.Response">
                                    <dd v-for="item in event.metadata.msf_response_medical_material">
                                      {{item}}
                                    </dd>
                                    <dd><b>Total:</b> {{event.metadata.msf_response_medical_material_total}}</dd>
                                    <dd><b>Date of Arrival:</b> {{formatDateOnly(event.metadata.msf_response_medical_material_date_arrival)}}</dd>
                                  </div>
                                  <div v-else >
                                        <dd>
                                          <div v-for="item in msfMedicalMaterials" class="operational-centers">
                                            <label>
                                              <input type="checkbox" :value="item" v-model="event.metadata.msf_response_medical_material" /> {{ item }}
                                            </label>
                                          </div>
                                        </dd>

                                      <dd>
                                      <dl>
                                        <dt>Total</dt>
                                        <dd>
                                          <input type="number" v-model.number="event.metadata.msf_response_medical_material_total" class="form-control" placeholder="Exact number of supplies" />
                                        </dd>
                                      </dl>
                                      </dd>

                                    <dd>
                                      <dl>
                                        <dt>Date of arrival</dt>
                                        <dd>
                                          <date-picker v-model="event.metadata.msf_response_medical_material_date_arrival" :config="{format: 'YYYY-MM-DD'}" placeholder="Date of arrival"></date-picker>
                                        </dd>
                                      </dl>
                                    </dd>
                                  </div>
                              <dt>
                                Non-Medical Material:
                              </dt>
                              <div v-if="!panelEditing.Response">
                                <dd v-for="item in event.metadata.msf_response_non_medical_material">
                                  {{item}}
                                </dd>
                                <dd><b>Total:</b> {{event.metadata.msf_response_non_medical_material_total}}</dd>
                                <dd><b>Date of Arrival:</b> {{formatDateOnly(event.metadata.msf_response_non_medical_material_date_arrival)}}</dd>
                              </div>
                              <div v-else>
                                    <dd>
                                      <div v-for="item in msfNonMedicalMaterials" class="operational-centers">
                                        <label>
                                          <input type="checkbox" :value="item" v-model="event.metadata.msf_response_non_medical_material" /> {{ item }}
                                        </label>
                                      </div>
                                    </dd>
                                <dd>
                                  <dl>
                                    <dt>Total</dt>
                                    <dd>
                                      <input type="number" v-model.number="event.metadata.msf_response_non_medical_material_total" class="form-control" placeholder="Exact number of supplies" />
                                    </dd>
                                  </dl>
                                </dd>
                                <dd>
                                  <dl>
                                    <dt>Date of arrival</dt>
                                    <dd>
                                      <date-picker v-model="event.metadata.msf_response_non_medical_material_date_arrival" :config="{format: 'YYYY-MM-DD'}" placeholder="Date of arrival"></date-picker>
                                    </dd>
                                  </dl>
                                </dd>
                                <div class="panel panel-info" style="margin-top:5px;" v-if="hasBeenAnalyzed">
                                  <div class="panel-heading" >
                                    <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseSupp">
                                      <a data-toggle="collapse" data-target="#collapseSupp"
                                      href="#" class="collapsed">
                                      * Analysis suggestions: supplies
                                      </a>
                                    </div>
                                  </div>
                                  <div id="collapseSupp" class="panel-collapse collapse in">
                                    <div class="panel-body" >
                                      <h5> Supplies:</h5>
                                      <p class="help-block" v-if="vizalyticsResp.supplies.length==0">
                                         No supplies suggested.
                                      </p>
                                      <table class="table table-striped">
                                        <thead>
                                          <tr v-for="head in vizalyticsResp.supplies.slice(0,1)">
                                            <th v-for="h in head">{{h}}</th>

                                          </tr>

                                        </thead>
                                        <tbody>
                                          <tr v-for="row in vizalyticsResp.supplies.slice(1)">
                                            <td v-for="col in row">{{col}}</td>

                                          </tr>

                                        </tbody>
                                      </table>

                                    </div>
                                  </div>
                                </div>


                              </div>

                    </div>
                  </div>
                </div>
                <div :class="{'panel':true, 'panel-default': !panelDirty.ExtCapacity, 'panel-warning': panelDirty.ExtCapacity}" >
                  <div class="panel-heading">
                    <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseExtCapacity">
                      <a data-toggle="collapse" data-target="#collapseExtCapacity"
                      href="#" class="collapsed">
                      External Capacity
                      </a>
                    </div>
                    <button type="button" v-if="!panelEditing.ExtCapacity" class="btn btn-info btn-xs pull-right" @click="editEvent('ExtCapacity')">Edit</button>
                    <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.ExtCapacity">Cancel</button><span class="pull-right">&nbsp;</span>
                    <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('ExtCapacity')" v-show="panelEditing.ExtCapacity">Save</button>
                  </div>
                  <div id="collapseExtCapacity" class="panel-collapse collapse">
                    <div class="panel-body" >
                      <div>
                            <dl v-if="!panelEditing.ExtCapacity" class="dl-horizontal">
                              <dt>Analysis of capacity on the ground:</dt>
                              <dd>{{event.metadata.ext_capacity_type_in_ground =='medical' ? 'Medical' : 'Non-Medical'}}</dd>
                              <dd>{{event.metadata.capacity}}</dd>
                              <dd>{{event.metadata.ext_capacity_by_humanitarian}}</dd>
                              <dd>{{event.metadata.ext_capacity_action_plan}}</dd>
                              <dd>{{event.metadata.ext_capacity_who}}</dd>
                              <dt>Other organizations:</dt>
                              <section v-for="(item, index) in event.metadata.ext_other_organizations">
                                <dd>{{item.name + ' - ' + item.deployment + ' - '+ formatDateOnly(item.arrival_date) }}</dd>
                              </section>

                            </dl>
                            <dl v-else >
                              <dt>Analysis of capacity on the ground</dt>
                              <dd>
                                <label>
                                  <input type="radio" value="medical" v-model="event.metadata.ext_capacity_type_in_ground" /> Medical
                                </label>
                                <label>
                                  <input type="radio" value="non_medical" v-model="event.metadata.ext_capacity_type_in_ground" /> Non-Medical
                                </label>
                              </dd>
                              <dd class="padding-bottom" v-bind:class="{'highlight': suggestEdit.ExtCapacity &&  event.metadata.event_status == 'monitoring' }">
                                 <span class="highlight" v-show="suggestEdit.ExtCapacity &&  event.metadata.event_status == 'monitoring'">* Please review</span>
                                <textarea v-model.trim="event.metadata.capacity" placeholder="Government capacity" class="form-control"></textarea>
                              </dd>
                              <dd class="padding-bottom">
                                <textarea v-model.trim="event.metadata.ext_capacity_by_humanitarian" placeholder="Humanitarian" class="form-control"></textarea>
                              </dd>
                              <dd class="padding-bottom">
                                <textarea v-model.trim="event.metadata.ext_capacity_action_plan" placeholder="Action plan" class="form-control"></textarea>
                              </dd>
                              <dd class="padding-bottom">
                                <input type="text" v-model="event.metadata.ext_capacity_who" class="form-control" placeholder="Who" />
                              </dd>
                            </dl>
                            <div v-if="panelEditing.ExtCapacity" class="row">
                              <div class="col-sm-12">
                                <table class="table">
                                  <thead>
                                    <tr>
                                      <th>NGO</th>
                                      <th>Deployment</th>
                                      <th>Arrival</th>
                                      <th>&nbsp;</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr v-for="(item, index) in event.metadata.ext_other_organizations" v-bind:class="{ 'highlight': suggestEdit.ExtCapacity &&  event.metadata.event_status == 'monitoring' }">
                                        <span class="highlight" v-show="suggestEdit.ExtCapacity &&  event.metadata.event_status == 'monitoring'">* Please review</span>
                                      <td>
                                        <input type="text" class="form-control" v-model="item.name" />
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" v-model.number="item.deployment" />
                                      </td>
                                      <td>
                                        <date-picker v-model="item.arrival_date" :config="{format: 'YYYY-MM-DD'}" placeholder="Date of arrival"></date-picker>
                                      </td>
                                      <td>
                                        <button type="button" class="btn btn-xs btn-danger" v-on:click="removeOtherOrg(index)">X</button>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan="4">
                                        <button type="button" class="btn btn-xs btn-success" v-on:click="addOtherOrg">Add more organization</button>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <div :class="{'panel':true, 'panel-default': !panelDirty.Figures, 'panel-warning': panelDirty.Figures}">
                      <div class="panel-heading">
                        <div class="panel-header-click-area"  data-toggle="collapse"  data-target="#collapseFigures">
                          <a data-toggle="collapse" data-target="#collapseFigures"
                          href="#" class="collapsed">
                          Medical Figures
                        </a>
                      </div>
                      <button type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Figures')" v-if="!panelEditing.Figures">Edit</button>
                      <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Figures" >Cancel</button><span class="pull-right">&nbsp;</span>
                      <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Figures')" v-show="panelEditing.Figures" >Save</button>

                    </div>
                    <div id="collapseFigures" class="panel-collapse collapse">
                      <div class="panel-body" >
                        <div v-if="!panelEditing.Figures">
                          <dl class="dl-horizontal">
                            <dt>Figures:</dt>
                            <dd v-for="(item, index) in event.metadata.keyMSFFigures">{{item.category.replace(/_/g,' ') }} , <i>value:</i> {{item.value}}</dd>
                            <dt>Population in total for zone impacted:</dt>
                            <dd>{{event.metadata.population_total}}</dd>
                            <dt>Description:</dt>
                            <dd>{{event.metadata.population_total_description}}</dd>
                            <dt>Population affected:</dt>
                            <dd>{{event.metadata.population_affected}}</dd>
                            <dt>Description:</dt>
                            <dd>{{event.metadata.population_affected_description}}</dd>
                            <dt>Percentage of people affected:</dt>
                            <dd>{{event.metadata.percentage_population_affected}}</dd>
                          </dl>
                        </div>
                        <div v-else>
                          <ul class="list-group">
                            <li class="list-group-item">
                              <dl>
                                <dt>Figures</dt>
                                <dd>
                                  <div class="row">
                                    <div class="col-sm-6">
                                      <div v-if="event.metadata.keyMSFFigures.length === 0">
                                        <div class="well">No MSF Figure yet.</div>
                                      </div>
                                      <div class="clearfix">&nbsp;</div>
                                      <span class="highlight" v-show="suggestEdit.Figures &&  (event.metadata.event_status == 'exploration' || event.metadata.event_status == 'ongoing')">* Please review</span>

                                      <div v-for="(item, index) in event.metadata.keyMSFFigures"  v-bind:class="{ 'highlight' : suggestEdit.Figures &&   (event.metadata.event_status =='exploration' || event.metadata.event_status =='ongoing') }">
                                        <div class="row">
                                          <div class="col-sm-2">
                                            <button class="btn btn-xs btn-danger" @click="removeMSFfigure(item, index)">X</button>
                                          </div>
                                          <div class="col-sm-10">
                                            <input type="range" min="1" max="10" step="1" v-model="item.range" v-on:input="updateFigureValue(item, index)" />
                                          </div>
                                          <div class="col-sm-12">
                                            <label>{{ item.category | relaceUnderscore }}: {{ item.value | formatedNumber }}</label>
                                            <div v-if="item.category === 'others' || item.category === 'measles_or_others_(be_specify)_vaccinations'"  v-bind:class="{ 'highlight' : suggestEdit.Figures && event.metadata.event_status == 'exploration'}">
                                                <span class="highlight" v-show="suggestEdit.Figures && event.metadata.event_status == 'exploration'"> </span>
                                              <input type="text" v-model="item.description" class="form-control" placeholder="Please Specify" />
                                            </div>
                                          </div>
                                        </div>
                                        <hr/>
                                      </div>
                                    </div>
                                    <div class="col-sm-6">
                                      <div v-for="(item, index) in keyMSFFigures">
                                        <a href="#" @click="addSelectedMSFfigures(item)"><i class="glyphicon glyphicon-ok" ></i> {{ item | relaceUnderscore }}</a>
                                      </div>
                                    </div>
                                  </div>
                                </dd>
                                <dd>
                                </dd>
                              </dl>
                            </li>
                            <li class="list-group-item">
                              <dl>
                                <dt>Population in total for zone impacted</dt>
                                <dd v-bind:class="{ 'highlight' : suggestEdit.Figures &&  event.metadata.event_status == 'monitoring' }">
                                    <span class="highlight" v-show="suggestEdit.Figures &&  event.metadata.event_status == 'monitoring'">* Please review</span>
                                  <div class="row">
                                    <div class="col-sm-4">
                                      <input type="number" class="form-control" v-model.number="event.metadata.population_total" v-on:change="calculatePercentagePeopleAffected" placeholder="Total population" />
                                    </div>
                                    <div class="col-sm-8">
                                      <textarea v-model.trim="event.metadata.population_total_description" placeholder="Description" class="form-control"></textarea>
                                    </div>
                                  </div>
                                </dd>
                              </dl>
                              <dl>
                                <dt>Population affected</dt>
                                <dd v-bind:class="{ 'highlight' : suggestEdit.Figures &&  event.metadata.event_status == 'monitoring'}">
                                <span class="highlight" v-show="suggestEdit.Figures &&  event.metadata.event_status == 'monitoring'">* Please review</span>
                                  <div class="row">
                                    <div class="col-sm-4">
                                      <input type="number" class="form-control col-sm-3" v-model.number="event.metadata.population_affected" v-on:change="calculatePercentagePeopleAffected" placeholder="Affected population" />
                                    </div>
                                    <div class="col-sm-8">
                                      <textarea v-model.trim="event.metadata.population_affected_description" placeholder="Description" class="form-control"></textarea>
                                    </div>
                                  </div>
                                </dd>
                              </dl>
                              <dl>
                                <dt>Percentage of people affected</dt>
                                <dd>
                                  <div class="row">
                                    <div class="col-xs-4">
                                      <input type="number" class="form-control col-sm-3" v-model.number="event.metadata.percentage_population_affected" placeholder="Affected population" />
                                    </div>
                                  </div>
                                </dd>
                              </dl>
                            </li>
                          </ul>


                        </div>
                      </div>
                    </div>
                  </div>
                  <div :class="{'panel':true, 'panel-default': !panelDirty.Resources, 'panel-warning': panelDirty.Resources}" >
                    <div class="panel-heading">
                      <div class="panel-header-click-area"  data-toggle="collapse"  data-target="#collapseResources">
                        <a data-toggle="collapse" data-target="#collapseResources" href="#" class="collapsed">
                          Staff Resources
                        </a>
                        <span class="label label-success" v-if="hasBeenAnalyzed && vizalyticsResp.contacts.length>0">(**suggestions available in edit mode)</span>
                      </div>
                      <button type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Resources')" v-if="!panelEditing.Resources">Edit</button>
                      <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Resources" >Cancel</button><span class="pull-right">&nbsp;</span>
                      <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Resources')" v-show="panelEditing.Resources">Save</button>
                    </div>
                  <div id="collapseResources" class="panel-collapse collapse">
                    <div class="panel-body" >
                      <div v-if="!panelEditing.Resources">
                        <dl class="dl-horizontal">
                          <dt>Staff list — human resources:</dt>
                          <dd>{{event.metadata.msf_resource_staff_list}}</dd>
                          <dt>Expatriate:</dt>
                          <dd>{{event.metadata.msf_resource_staff_expatriate}}</dd>
                          <dt>National staff:</dt>
                          <dd>{{event.metadata.msf_resource_staff_national}}</dd>
                          <dt>Visa requirement:</dt>
                          <dd v-for="item in event.metadata.msf_resource_visa_requirement.nationality"><span v-if="item.name"> {{item.name}} , <i>required:</i> {{item.is_required}} </span><span v-else>No</span></dd>
                          <dt>Description:</dt>
                          <dd>{{event.metadata.msf_resource_visa_requirement.description}}</dd>
                          <dt>Budget:</dt>
                          <dd v-for="(item, index) in event.metadata.msf_resource_budget"><span v-if="(item.from_who) || (item.amount>0)" ><i>Amount:</i>{{item.amount}}, <i>From:</i>{{item.from_who}}</span><span v-else></span> </dd>
                          <dt>Institutional Donors:</dt>
                          <dd>{{event.metadata.msf_resource_institutional_donors}}</dd>
                        </dl>
                      </div>
                      <ul v-else class="list-group">
                        <li class="list-group-item">
                          <dl>
                            <dt>Staff list — human resources</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&  event.metadata.event_status == 'ongoing'}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'ongoing'">* Please review</span>
                              <textarea v-model.trim="event.metadata.msf_resource_staff_list" placeholder="Contact(s)" class="form-control"></textarea>
                            </dd>
                          </dl>
                        </li>
                        <li class="list-group-item">
                          <dl>
                            <dt>Expatriate</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&  (event.metadata.event_status == 'exploration' || event.metadata.event_status == 'ongoing')}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'exploration'">* Please review</span>
                              <textarea v-model.trim="event.metadata.msf_resource_staff_expatriate" placeholder="Contact(s)" class="form-control"></textarea>
                            </dd>
                          </dl>
                        </li>
                        <li class="list-group-item">
                          <dl>
                            <dt>National staff</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&   (event.metadata.event_status == 'exploration' || event.metadata.event_status == 'ongoing')}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'ongoing'">* Please review</span>
                              <textarea v-model.trim="event.metadata.msf_resource_staff_national" placeholder="Contact(s)" class="form-control"></textarea>
                            </dd>
                          </dl>
                        </li>
                        <li class="list-group-item" v-if="hasBeenAnalyzed">
                          <div class="panel panel-info" style="margin-top:5px;">
                            <div class="panel-heading" >
                              <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseCont">
                                <a data-toggle="collapse" data-target="#collapseCont"
                                href="#" class="collapsed">
                                * Analysis suggestions: contacts
                                </a>
                              </div>
                            </div>
                            <div id="collapseCont" class="panel-collapse collapse in">
                              <div class="panel-body" >
                                <h5> Contacts: </h5>
                                <p class="help-block"> Below are the contacts (if any have been found) that are located in the area of disaster.</p>
                                <ul>
                                  <li v-for="c in vizalyticsResp.contacts">{{c.name}}, <i> <a :href="'mailto:' + c.email">{{c.email}}</i>, <a>{{c.cell}}</a> </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </li>
                        <li class="list-group-item hidden">
                          <div class="row">
                            <div class="col-sm-6">
                              <dl>
                                <dt>When were they hired by MSF?</dt>
                                <dd>
                                  <date-picker v-model="event.metadata.msf_resource_hired_date" :config="{format: 'YYYY-MM-DD'}" placeholder="Hired date"></date-picker>
                                </dd>
                              </dl>
                            </div>
                            <div class="col-sm-6">
                              <dl>
                                <dt>When do they arrive on the ground?</dt>
                                <dd>
                                  <date-picker v-model="event.metadata.msf_resource_arrive_to_ground" :config="{format: 'YYYY-MM-DD'}" placeholder="Arrive to ground date"></date-picker>
                                </dd>
                              </dl>
                            </div>
                          </div>
                          <dl>
                            <dt>Category</dt>
                            <dd>
                              <select v-model="event.metadata.msf_resource_category" class="form-control">
                                <option disabled value="">Please select one</option>
                                <option v-for="item in msfResourceCategories" :value="item">{{ item | relaceUnderscore }}</option>
                              </select>
                            </dd>
                          </dl>
                          <dl>
                            <dt>Name</dt>
                            <dd></dd>
                          </dl>
                          <dl>
                            <dt>Function</dt>
                            <dd></dd>
                          </dl>
                          <dl>
                            <dt>Contact number</dt>
                            <dd></dd>
                          </dl>
                          <dl>
                            <dt>Comments/Evaluation</dt>
                            <dd></dd>
                          </dl>
                        </li>
                        <li class="list-group-item">
                          <dl>
                            <dt>Visa requirement</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&  event.metadata.event_status == 'exploration'}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'exploration'">* Please review</span>
                              <label>Nationality</label>
                              <div style="display:block;" v-for="(nat,ind) in event.metadata.msf_resource_visa_requirement.nationality">
                                 <country-select :options="countryParams" :value="nat" @input="countryChanged($event,ind)"></country-select>

                                   <label>Required:</label>
                                   <label>
                                     <input type="radio" :name="'nationalityRequired_'+ind" v-model="nat.is_required" value="yes"> Yes
                                   </label>
                                   <label>
                                     <input type="radio" :name="'nationalityRequired_'+ind" v-model="nat.is_required" value="no"> No
                                   </label>

                                 <button type="button" class="btn btn-danger btn-xs" style="float:right;" @click="removeNationalityField(ind)">x</button>
                              </div>
                              <button type="button" class="btn btn-success btn-xs" @click="addNationalityField">Add another nationality</button>
                            </dd>

                            <dd>
                              <label>Description:</label>
                              <textarea v-model.trim="event.metadata.msf_resource_visa_requirement.description" placeholder="Specify" class="form-control"></textarea>
                            </dd>
                          </dl>
                        </li>
                        <li class="list-group-item">
                          <dl>
                            <dt>Budget</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&  event.metadata.event_status == 'exploration'}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'exploration'">* Please review</span>
                              <table class="table">
                                <thead>
                                  <tr>
                                    <th>Amount</th>
                                    <th>From who</th>
                                    <th>&nbsp;</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr v-for="(item, index) in event.metadata.msf_resource_budget">
                                    <td>
                                      <input type="text" class="form-control" v-model="item.amount" />
                                    </td>
                                    <td>
                                      <input type="text" class="form-control" v-model.number="item.from_who" />
                                    </td>
                                    <td>
                                      <button type="button" class="btn btn-xs btn-danger" v-on:click="removeResourceBudget(index)">X</button>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td colspan="4">
                                      <button type="button" class="btn btn-xs btn-success" v-on:click="addResourceBudget">Add more budget</button>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </dd>
                          </dl>
                        </li>
                        <li class="list-group-item">
                          <dl>
                            <dt>Institutional Donors</dt>
                            <dd v-bind:class="{ 'highlight': suggestEdit.Resources &&  event.metadata.event_status == 'exploration'}">
                                <span class="highlight" v-show="suggestEdit.Resources &&  event.metadata.event_status == 'exploration'">* Please review</span>
                              <textarea v-model.trim="event.metadata.msf_resource_institutional_donors" placeholder="Donors" class="form-control"></textarea>
                            </dd>
                          </dl>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div :class="{'panel':true, 'panel-default': !panelDirty.Reflection, 'panel-warning': panelDirty.Reflection}" >
                  <div class="panel-heading">
                    <div class="panel-header-click-area"  data-toggle="collapse" data-target="#collapseReflection">
                      <a data-toggle="collapse" data-target="#collapseReflection"
                      href="#" class="collapsed">
                      Reflection
                    </a>
                  </div>
                  <button type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Reflection')" v-if="!panelEditing.Reflection">Edit</button>
                  <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Reflection" >Cancel</button><span class="pull-right">&nbsp;</span>
                  <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Reflection')" v-show="panelEditing.Reflection" >Save</button>
                </div>
                <div id="collapseReflection" class="panel-collapse collapse">
                  <div class="panel-body" >
                    <div v-if="!panelEditing.Reflection">
                      <dl class="dl-horizontal">
                        <dt>Practical Details / Recommendations:</dt>
                        <dd>{{event.metadata.msf_ref_com_practical_details_recomm}}</dd>
                        <dt>Reflection / Comments on intervention:</dt>
                        <dd>{{event.metadata.msf_ref_com_reflection_comments}}</dd>
                      </dl>
                    </div>
                    <ul v-else class="list-group">
                      <li class="list-group-item">
                        <dl>
                          <dt>Practical Details / Recommendations</dt>
                          <dd v-bind:class="{ 'highlight' : suggestEdit.Reflection && (event.metadata.event_status =='exploration' || event.metadata.event_status =='monitoring') }">
                          <span class="highlight" v-show="suggestEdit.Reflection">* Please review</span>
                            <textarea v-model.trim="event.metadata.msf_ref_com_practical_details_recomm" placeholder="Description" class="form-control"></textarea>
                          </dd>
                        </dl>
                      </li>
                      <li class="list-group-item">
                        <dl>
                          <dt>Reflection / Comments on intervention</dt>
                          <dd v-bind:class="{ 'highlight' : suggestEdit.Reflection && (event.metadata.event_status =='exploration' || event.metadata.event_status =='monitoring') }">
                          <span class="highlight" v-show="suggestEdit.Reflection">* Please review</span>
                            <textarea v-model.trim="event.metadata.msf_ref_com_reflection_comments" placeholder="Description" class="form-control"></textarea>
                          </dd>
                        </dl>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>



        <div :class="{'panel':true, 'panel-default': true}">
            <div class="panel-heading" style="cursor:pointer;" data-toggle="collapse" data-target="#collapseSecurity">
                <a data-toggle="collapse" data-target="#collapseSecurity"
                    href="#collapseSecurity" class="collapsed">
                    Security Details
                </a>
                <button type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('Security')" v-if="!panelEditing.Security">Edit</button>
                <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.Security">Cancel</button><span class="pull-right">&nbsp;</span>
                <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('Security')" v-show="panelEditing.Security">Save</button>
            </div>
            <div id="collapseSecurity" class="panel-collapse collapse">
              <div v-if="!panelEditing.Security" class="panel-body" id="eventSecurityDetails" >{{event.metadata.security_details}}</div>
              <textarea v-model.trim="event.metadata.security_details" placeholder="Security details" class="form-control" v-else></textarea>

            </div>
          </div>

          <div :class="{'panel':true, 'panel-default': !panelDirty.ExtraDetails, 'panel-warning': panelDirty.ExtraDetails}" >
            <div class="panel-heading" style="cursor:pointer;" data-toggle="collapse" data-target="#collapseExtraDetails">
                <a data-toggle="collapse" data-target="#collapseExtraDetails"
                href="#collapseExtraDetails" class="collapsed">
                Extra details
                </a>
                <button type="button" class="btn btn-info btn-xs pull-right" @click="editEvent('ExtraDetails')" v-if="!panelEditing.ExtraDetails">Edit</button>
                <button type="button" class="btn btn-warning btn-xs pull-right" @click="cancelEventEdits()" v-show="panelEditing.ExtraDetails">Cancel</button><span class="pull-right">&nbsp;</span>
                <button type="button" class="btn btn-primary btn-xs pull-right" @click="updateSection('ExtraDetails')" v-show="panelEditing.ExtraDetails">Save</button>
            </div>
            <div id="collapseExtraDetails" class="panel-collapse collapse">
              <div class="panel-body" v-if="!panelEditing.ExtraDetails">
                <dl id="eventExtra" class="dl-horizontal" >
                    <span v-for="item in Object.keys(extraDetailsLabel)">
                      <dt>{{extraDetailsLabel[item]}}</dt><dd> {{event.metadata[item]}}</dd>
                  </span>
                </dl>
              </div>
              <ul class="list-group" v-else>
                <li class="list-group-item" v-for="item in Object.keys(extraDetailsLabel)">
                <label >{{extraDetailsLabel[item]}}</label>
                <textarea v-model="event.metadata[item]" class="form-control"></textarea>
                </li>
              </ul>

            </div>
          </div>
      </div>
      <!--
      <button class="btn btn-primary"  @click="editEvent('general')">Edit in new window</button>
      <button class="btn btn-default"  @click="cancelEventEdits()" v-if="somePanelDirty">Cancel Edits</button>
      -->
      <!-- Button trigger modal -->
       <button type="button" class="btn btn-danger" onclick="onArchiveEvent()">Close Event</button>

    </div>
    <div id="tweets" class="tab-pane fade">
      <div class="row">
        <div class="col-md-5" @scroll="checkTweetScroll" style="height:80vh;overflow-y:auto;" >
          <h4>Twitter Feed</h4>
          <div class="input-group add-on">
            <input  class="form-control" placeholder="Search e.g. #earthquake" name="srch-term" id="searchTerm" type="text">
            <div class="input-group-btn">
              <button id="btnSearchTwitter" class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
          </div>
          <div id="translationSuggestedLanguages">Suggested languages (based on country, if in SE Asia): </div>
          <div>
          <select class="goog-te-combo" id="translateLanguageSelection">
            <option value="">Select Language</option>
            <option value="af">Afrikaans</option>
            <option value="sq">Albanian</option>
            <option value="am">Amharic</option>
            <option value="ar">Arabic</option>
            <option value="hy">Armenian</option>
            <option value="az">Azerbaijani</option>
            <option value="eu">Basque</option>
            <option value="be">Belarusian</option>
            <option value="bn">Bengali</option>
            <option value="bg">Bulgarian</option>
            <option value="my">Burmese</option>
            <option value="ca">Catalan</option>
            <option value="ceb">Cebuano</option>
            <option value="ny">Chichewa</option>
            <option value="zh-CN">Chinese (Simplified)</option>
            <option value="zh-TW">Chinese (Traditional)</option>
            <option value="co">Corsican</option>
            <option value="hr">Croatian</option>
            <option value="cs">Czech</option>
            <option value="da">Danish</option>
            <option value="nl">Dutch</option>
            <option value="en">English</option>
            <option value="eo">Esperanto</option>
            <option value="et">Estonian</option>
            <option value="tl">Filipino</option>
            <option value="fi">Finnish</option>
            <option value="fr">French</option>
            <option value="fy">Frisian</option>
            <option value="gl">Galician</option>
            <option value="ka">Georgian</option>
            <option value="de">German</option>
            <option value="el">Greek</option>
            <option value="gu">Gujarati</option>
            <option value="ht">Haitian Creole</option>
            <option value="ha">Hausa</option>
            <option value="haw">Hawaiian</option>
            <option value="iw">Hebrew</option>
            <option value="hi">Hindi</option>
            <option value="hmn">Hmong</option>
            <option value="hu">Hungarian</option>
            <option value="is">Icelandic</option>
            <option value="ig">Igbo</option>
            <option value="id">Indonesian</option>
            <option value="ga">Irish</option>
            <option value="it">Italian</option>
            <option value="id">Indonesian</option>
            <option value="ja">Japanese</option>
            <option value="jw">Javanese</option>
            <option value="kn">Kannada</option>
            <option value="kk">Kazakh</option>
            <option value="km">Khmer</option>
            <option value="ko">Korean</option>
            <option value="ku">Kurdish</option>
            <option value="ky">Kyrgyz</option>
            <option value="lo">Lao</option>
            <option value="la">Latin</option>
            <option value="lv">Latvian</option>
            <option value="lt">Lithuanian</option>
            <option value="lb">Luxembourgish</option>
            <option value="mk">Macedonian</option>
            <option value="mg">Malagasy</option>
            <option value="ms">Malay</option>
            <option value="ml">Malayalam</option>
            <option value="mt">Maltese</option>
            <option value="mi">Maori</option>
            <option value="mr">Marathi</option>
            <option value="mn">Mongolian</option>
            <option value="ne">Nepali</option>
            <option value="no">Norwegian</option>
            <option value="ps">Pashto</option>
            <option value="fa">Persian</option>
            <option value="pl">Polish</option>
            <option value="pt">Portuguese</option>
            <option value="pa">Punjabi</option>
            <option value="ro">Romanian</option>
            <option value="ru">Russian</option>
            <option value="sm">Samoan</option>
            <option value="gd">Scots Gaelic</option>
            <option value="sr">Serbian</option>
            <option value="st">Sesotho</option>
            <option value="sn">Shona</option>
            <option value="sd">Sindhi</option>
            <option value="si">Sinhala</option>
            <option value="sk">Slovak</option>
            <option value="sl">Slovenian</option>
            <option value="so">Somali</option>
            <option value="es">Spanish</option>
            <option value="su">Sundanese</option>
            <option value="sw">Swahili</option>
            <option value="sv">Swedish</option>
            <option value="tg">Tajik</option>
            <option value="ta">Tamil</option>
            <option value="te">Telugu</option>
            <option value="th">Thai</option>
            <option value="tr">Turkish</option>
            <option value="uk">Ukrainian</option>
            <option value="ur">Urdu</option>
            <option value="uz">Uzbek</option>
            <option value="vi">Vietnamese</option>
            <option value="cy">Welsh</option>
            <option value="xh">Xhosa</option>
            <option value="yi">Yiddish</option>
            <option value="yo">Yoruba</option>
            <option value="zu">Zulu</option>
          </select>

        Powered by <span style="white-space: nowrap;"><a class="goog-logo-link" href="https://translate.google.com" target="_blank"><img style="padding-right: 3px;" src="https://www.google.com/images/logos/google_logo_41.png" width="37" height="13">Translate</a></span>
      </div>

          <div id="tweetFeed"></div>

        </div>
        <div class="col-md-7">
          <h4>Saved Tweets</h4>
          <div style="border:1px dashed blue; height:200px; width:500px;" ondrop="dropSaveTweet(event)" ondragover="allowDrop(event)"><p style="padding-left:160px;padding-top:90px;">Drag Tweets Here to Save</p> </div>
          <div id="savedTweets" style="height:45vh;overflow-y:auto;"></div>
        </div>
      </div>
    </div>
    <div id="sharepoint" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" style="height:80vh;overflow-y:auto;" >
          <h4>Sharepoint Search</h4>
          <div class="input-group add-on">
            <input  class="form-control" placeholder="Search e.g. #earthquake" name="srch-term" id="searchTermSP" type="text">
            <div class="input-group-btn">
              <button  class="btn btn-default" ><i class="glyphicon glyphicon-search"></i></button>
            </div>
          </div>
          <div><a id="sharePointSearchLink" class="btn btn-danger" href="" target="_blank">Sharepoint search page</a></div>

        </div>
      </div>
    </div>
    <div id="contacts" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" >
          <h4>Contacts</h4>
          <div class="form-group" >
            <label for="inputContactType" style="text-transform:uppercase;">Category</label>
            <select class="form-control" style="color:black;" id="inputContactType" >
              <option value="" selected>(no category filtering)</option>
              <option value="Current MSF Staff">Current MSF Staff</option>
              <option value="msf_peer">Former Staff</option>
              <option value="msf_associate">Association Member</option>
              <option value="Supplier">Supplier</option>
              <option value="United Nations">United Nations</option>
              <option value="Government">Government</option>
              <option value="Other NGO">Other NGO</option>
              <option value="Academic">Academic</option>
              <option value="Private Medical Practice">Private Medical Practice</option>
            </select>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" id="contSearchTerm" name="" value="" placeholder="Search by typing Name, Phone, Email, etc. ... ..."><br />
          </div>
          <div id="contactsContainer" style="height:70vh;overflow:auto;"></div>
        </div>
      </div>
    </div>
    <div id="missions" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" >
          <h4>Missions</h4>
          <div class="form-group">
            <input type="text" class="form-control" id="missSearchTerm" name="" value="" placeholder="Term for searching name, region, severity or capacity ...">
          </div>
          <div id="missionsContainer"></div>
        </div>
      </div>
    </div>
    <div id="ongoingEvents" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" >
          <h4>Ongoing MSF Responses in the same country</h4>
          <div id ="ongoingEventsContainer" style="height:70vh;"></div>
        </div>
      </div>
    </div>
    <div id="reports" class="tab-pane fade">
      <div class="row">
        <div class="col-md-6" >
          <h4>Reports</h4>
          <div id="reportsContainer" style="height:70vh;"></div>
        </div>
      </div>
    </div>
    <div id="countryDetailsCIA" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" >
          <div id="countryDetailsCIAContainer" style="height:70vh;"></div>
        </div>
      </div>
    </div>
    <div id="countryDetailsLinks" class="tab-pane fade">
      <div class="row">
        <div class="col-md-12" >
          <div id="countryDetailsLinksContainer" style="height:70vh;"></div>
        </div>
      </div>
    </div>
  </div> <!--Vue App -->
</div>

<!-- Map -->
<div id="mapContainer" class="col-md-6">
  <div class="row bottom-margined">
      <div class="col-sm-12">
        <input type="text" class="form-control" placeholder="Search address/location..." id="eventAddress">
      </div>
  </div>
  <div class="row bottom-margined">
    <div class="col-sm-4">
      <label for="mapAddressLat">OR locate by coordinates:</label>
    </div>
    <div class="col-sm-3">
      <input type="text" class="form-control" value="" id="eventAddressLat" placeholder="Latitude">
    </div>
    <div class="col-sm-3">
      <input type="text" class="form-control" value="" id="eventAddressLng" placeholder="Longitude">
    </div>
    <div class="col-sm-2">
      <button type="button" class="btn btn-info btn-sm" id="eventAddressLocate"><span class="glyphicon glyphicon-search"></span></button>
    </div>
  </div>
  <div id="map"></div>
</div>
</div> <!-- Row -->
</div> <!-- container -->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/lib/lodash.min.js"></script>
<script src="/lib/async/async.min.js"></script>
<script src="/lib/moment.min.js"></script>
<script src="/lib/jquery/jquery-3.3.1.min.js"></script>
<script src="/lib/jquery/jquery-ui-1.12.1.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->

<!-- Copy to clipboard functionality -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>


<script src="/lib/bootstrap/js/bootstrap.min.js"></script>
<script src="/lib/bootstrap/plugins/datetimepicker/bootstrap-datetimepicker.min.js"></script>
<script src="/lib/jquery/jquery.flexText.min.js"></script>
<script src="/lib/jquery/jquery.validate.js"></script>
<!-- Cookies -->
<script src="/lib/cookie/js.cookie-2.2.0.min.js"></script>
<!--Twitter-->
<script src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<!--Google translate-->
<script src="https://www.google.com/jsapi?key=AIzaSyBI92Die-8EJ8kKGk5H1s7uoJlj9zn7PkU"></script>

<script src="/lib/countrySelect.min.js"></script>

<!-- VueJs + plug-ins -->
<script src="/lib/vue/vue.min.js"></script>
<script src="/lib/vue/plugins/vue-bootstrap-datetimepicker.min.js"></script>


<!-- Get query parameter from URL -->
<!-- Ask the server for reports from specific event -->
<!-- Display event details -->
<!-- Display map with points -->
<script src="/lib/getQueryVariable/getQueryVariable.js"></script>
<script src="/lib/leaflet/leaflet.js"></script>
<script src="/lib/leaflet/leaflet.groupedlayercontrol.min.js"></script>
<script src="/lib/leaflet/leaflet.markercluster.js"></script>
<script src="/lib/leaflet/leaflet.rrose.js"></script>
<script src="/lib/arcgis-to-geojson.js"></script>

<script src="/lib/clipboard.min.js"></script>

<script src="/resources/js/nav.js"></script>
<script src="/resources/js/dragdrop.js"></script>
<script src="/resources/js/twitter.js"></script>

<script src="/resources/js/new-report.js"></script>
<script src="/report/reportcard.js"></script>
<script src="/resources/js/address-autocomplete.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBI92Die-8EJ8kKGk5H1s7uoJlj9zn7PkU&libraries=places&callback=initGoogle" async defer></script>

<script type="text/javascript" src="/resources/js/common.js"></script>
<script src="/resources/js/healthsites.js"></script>

<script src="/resources/js/countries.js"></script>
<script src="/resources/js/country-codes.js"></script>


<!-- events common variables -->
<script src="/events/common.js"></script>
<script src="/resources/js/events.js"></script>

<script src="/resources/js/contacts.js"></script>
<script src="/resources/js/missions.js"></script>
<script>

var mapOn = 1;

$('#feedTab').on('click', function(e){
  //$('#mapContainer').removeClass('col-md-8');
  if (mapOn === 1){
    $('#mapContainer').toggle();
    $('#sidepane').removeClass('col-md-6');
    $('#sidepane').addClass('col-md-12');
    mapOn = 0;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#contactsTab').on('click', function(e){
  //$('#mapContainer').removeClass('col-md-8');
  if (mapOn === 0) {
    $('#mapContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#missionsTab').on('click', function(e){
  //$('#mapContainer').removeClass('col-md-8');
  if (mapOn === 0) {
    $('#mapContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#eventTab').on('click', function(e){
  if (mapOn === 0) {
    $('#mapContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#ongoingEventsTab').on('click', function(e){
  if (mapOn === 0) {
    $('#mapContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#reportsTab').on('click', function(e){
  if (mapOn === 0) {
    $('#reportsContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

$('#countryDetailsTab').on('click', function(e){
  //$('#mapContainer').removeClass('col-md-8');
  if (mapOn === 0) {
    $('#mapContainer').toggle();
    $('#mapContainer').addClass('col-md-6');
    $('#sidepane').removeClass('col-md-12');
    $('#sidepane').addClass('col-md-6');
    mapOn = 1;
    setTimeout(function(){mainMap.invalidateSize()}, 400);
  }
});

var contactInfo = {};




</script>

</body>
</html>
